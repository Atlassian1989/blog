Installing VIM 7.3 on CentOS with Python 2.7.3 support

Python 2.7 alternate installation

First install some packages for correct python installation
yum -y groupinstall 'Development Tools'
yum -y  install openssl-devel* zlib*386 ncurses ncurses-devel  (use zlib* relevent to OS)

cd ~/temp
wget http://python.org/ftp/python/2.7.3/Python-2.7.3.tgz
tar zxvf Python-2.7.3.tgz
cd Python-2.7.3
./configure --prefix=/usr/local --with-threads --enable-shared 
make
sudo make altinstall

sudo ln -s /usr/local/bin/python2.7 /usr/bin/python2.7

sudo vi /etc/ld.so.conf.d/python2.7.conf
add below line (/usr/local/lib should have libpython2.7.so )
/usr/local/lib
sudo /sbin/ldconfig


" make python2.7 as default python in bash profile ï¿½ for vim setup
mkdir -p ~/bin
ln -s /usr/bin/python2.7 ~/bin/python
# Append to the end of ~/.bashrc for persistence
export PATH=$HOME/bin:$PATH
" refresh bashrc
source ~/.bashrc

sudo vim /etc/ld.so.conf.d/python2.7.conf 
add below line
'/usr/local/lib' 
sudo '/sbin/ldconfig'

python -V (should now return 2.7.3)


mkdir -p ~/temp
cd ~/temp
wget ftp://ftp.vim.org/pub/vim/unix/vim-7.3.tar.bz2
tar jxvf vim-7.3.tar.bz2
cd vim73
./configure --enable-pythoninterp --with-python-config-dir=/usr/local/lib/python2.7/config --with-features=huge --disable-selinux 
(compile with python support)
make
sudo make install

vim --version | grep Vi
to check if vim supports python:
:echo has("python")
Installing pathogen for other plugins
git config --global http.sslVerify false
mkdir -p ~/.vim/autoload ~/.vim/bundle
wget -O ~/.vim/autoload/pathogen.vim https://raw.github.com/tpope/vim-pathogen/HEAD/autoload/pathogen.vim
vim ~/.vimrc
call pathogen#infect()
syntax on
filetype plugin indent on

VIM Plugins

NERDTree:
cd ~/.vim/bundle
git clone https://github.com/scrooloose/nerdtree.git

.vimrc entries:
" NERDTree configuration
nmap <silent> <c-n> :NERDTreeToggle<CR>
let NERDTreeIgnore=['\.pyc$','\~$']
let NERDTreeShowBookmarks=1

NERDTree tutorial:-
Ctrl+n - Show/hide nerdtree window
Bookmark <name> [Bookmark current folder with name as bookmark name]
D Delete the current bookmark

To create files/folder in NERDTree view
press m when on the folder and NERDTree filesystem menu pops up
a add a child node
m move the current node
d delete the current node
node can be a file or a directory.  For directory, add a '/' at the end.

python-mode
cd ~/.vim/bundle
git clone git://github.com/klen/python-mode.git


" map Ctrl+ space for omni completion
imap <C-Space> <C-x><C-o>
imap <C-@> <C-Space>


Omni completion
.vimrc
-------------
" Omni completion
autocmd FileType python set omnifunc=pythoncomplete#Complete
autocmd FileType javascript set omnifunc=javascriptcomplete#CompleteJS
autocmd FileType html set omnifunc=htmlcomplete#CompleteTags
autocmd FileType css set omnifunc=csscomplete#CompleteCSS
autocmd FileType xml set omnifunc=xmlcomplete#CompleteTags
autocmd FileType php set omnifunc=phpcomplete#CompletePHP
autocmd FileType c set omnifunc=ccomplete#CompleteCpp


MiniBufExplorer
cd  ~/.vim/bundle
git clone git://github.com/fholgado/minibufexpl.vim.git

Buffers are visible at the top of the screen
Use Ctrl+ww to move to tab

snipMate
cd ~/.vim/bundle
git clone git://github.com/garbas/vim-snipmate.git

# Install dependencies:
git clone https://github.com/tomtom/tlib_vim.git
git clone https://github.com/MarcWeber/vim-addon-mw-utils.git
git clone https://github.com/honza/snipmate-snippets.git

Write text (say html) and press Tab to see the sinppet load



VIM Paste issue:
:set paste
Press  'i' to switch to insert mode and paste the lines
:set nopaste

Note:
=========
1. /site-packages/Crypto/Util/number.py:57 will give warning message. A not to recommended method is to comment this line :).
2. python-mode plugin expects that the virtual environment will have the same python version that is used for vim installaion
with python support. e.g. above we used python 2.7, python-mode virtual environment expects python2.7. 
[:call pymode#troubleshooting#Test() shows python2.7 path for virtual environments created with any version of python]
3. Rope completion is very slow
https://github.com/klen/python-mode/#rope-completion-is-very-slow
-Disable g:pymode_rope_guess_project to make rope always create .ropeproject in current dir.
-Delete .ropeproject from dip parent dir to make rope create .ropeproject in current dir.
-Press <C-x>po or :RopeOpenProject to make force rope create .ropeproject in current dir.


